[
  {
    "name": "${service_name}-${environment}-container",
    "image": "${image}",
    "cpu": 10,
    "memory": 512,
    "essential": true,
    "environment" : [
      { "name" : "VAULT_URL", "value" : "${vault_url}" },
      { "name" : "IAM_ROLE", "value" : "${task_role_arn}" },
      { "name" : "PG_HOST", "value" : "${pg_host}" },
      { "name" : "DB_SECRET", "value" : "${db_secret_path}" },
      { "name" : "PG_NAME", "value" : "${pg_db_name}" },
      { "name" : "INDEXD_SECRET", "value" : "${indexd_secret_path}" },
      { "name": "VAULT_ROLE", "value": "${vault_role}"},
      { "name": "EGO_DB", "value": "${ego_db}"},
      { "name": "EGO_ACTIVE_PROFILES", "value": "${ego_active_profiles}"}
    ],
    "portMappings": [
      {
        "containerPort": 80,
        "hostPort": 80,
        "protocol": "tcp"
      }
    ],
    "logConfiguration": {
        "logDriver": "awslogs",
        "options": {
            "awslogs-group": "${log_group_name}",
            "awslogs-region": "${log_group_region}",
            "awslogs-stream-prefix": "${log_group_name}"
        }
    }
  }
]
