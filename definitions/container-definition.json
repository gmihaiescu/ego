[
  {
    "name": "${service_name}-${environment}-container",
    "image": "${image}",
    "cpu": 10,
    "memory": 512,
    "essential": true,
    "environment" : [
      { "name" : "VAULT_URL", "value" : "${vault_url}" },
      { "name" : "IAM_ROLE", "value" : "${task_role_arn}" },
      { "name" : "PG_HOST", "value" : "${pg_host}" },
      { "name" : "EGO_DB_HOST", "value" : "${ego_db_host}" },
      { "name" : "EGO_DB_PORT", "value" : "${ego_db_port}" },
      { "name" : "EGO_SERVER_PORT", "value" : "${ego_server_port}" },
      { "name" : "PG_NAME", "value" : "${pg_db_name}" },
      { "name": "VAULT_ROLE", "value": "${vault_role}"},
      { "name": "EGO_DB", "value": "${ego_db}"},
      { "name": "EGO_ACTIVE_PROFILES", "value": "${ego_active_profiles}"},
      { "name": "EGO_IAM_ROLE", "value": "${ego_iam_role}"},
      { "name": "EGO_VAULT_PORT", "value": "${ego_vault_port}"},
      { "name": "EGO_VAULT_HOST", "value": "${ego_vault_host}"},
      { "name": "EGO_VAULT_URI", "value": "${ego_vault_uri}"},
      { "name": "EGO_VAULT_SCHEME", "value": "${ego_vault_scheme}"},
      { "name": "VAULT_APPLICATION_NAME", "value": "${vault_application_name}"}
    ],
    "portMappings": [
      {
        "containerPort": 80,
        "hostPort": 80,
        "protocol": "tcp"
      }
    ],
    "logConfiguration": {
        "logDriver": "awslogs",
        "options": {
            "awslogs-group": "${log_group_name}",
            "awslogs-region": "${log_group_region}",
            "awslogs-stream-prefix": "${log_group_name}"
        }
    }
  }
]
